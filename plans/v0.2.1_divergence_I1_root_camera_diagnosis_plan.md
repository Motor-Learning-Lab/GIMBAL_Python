# v0.2.1 Divergence Debugging — Issue I1: Root Dynamics × Camera Coupling

**Status:** Draft (first structured version)

**Related documents:**

* v0.2.1_divergence_plan_2.md (canonical roadmap)
* v0.2.1_divergence_test_plan.md

---

## 1. Purpose

This document is a focused diagnostic and stabilization plan for **Issue I1** within the v0.2.1 divergence campaign.

Empirical findings motivating this plan:

* Fixing the root trajectory (DLT-fixed root) yields stable sampling.
* Introducing temporal coupling on the root (RW variants tested so far) produces catastrophic divergences.
* Several superficial RW-focused fixes (non-centering, looser priors, anchoring attempts) have not resolved the issue.

The goal of this plan is to:

1. Diagnose whether the failure is primarily due to

   * root temporal dynamics themselves,
   * interaction with the camera likelihood geometry, or
   * amplification by parameter redundancy;
2. Allow **sequential, intentional fixes** to the core library when justified;
3. Decide whether a deeper architectural change (e.g., velocity-augmented state) is warranted.

This document does **not** propose an architectural redesign yet.

---

## 2. Scope and boundaries

* This plan covers **Issue I1** only (root dynamics × camera coupling).
* Camera-only issues without temporal coupling are handled under Issue I2.
* Redundancy / identifiability issues are addressed in Issue I3, but may be probed here as stress tests.

---

## 3. Policy: diagnostics vs core-library changes

### 3.1 Diagnostic variants (default)

Diagnostic variants are used to test hypotheses.

Rules:

* Implemented **only** in `tests/diagnostics/v0_2_1_divergence/`.
* Core library (`gimbal/`) code is not modified.
* Each variant differs from baseline in exactly one conceptual way.
* Each test group documents:

  * hypothesis,
  * expected outcome,
  * interpretation criteria.

### 3.2 Core-library fixes (explicit decisions)

Core-library changes are allowed **after** a diagnostic step is completed and interpreted.

Rules:

* The decision to modify core code is explicit and documented.
* Each fix is minimal and treated as a new baseline.
* Subsequent diagnostics are run against the updated baseline.
* Core changes are not exploratory; they implement a specific understanding gained from diagnostics.

---

## 4. Working hypotheses

H1. Root RW is not intrinsically pathological; failures arise from its interaction with the camera likelihood.

H2. Perspective projection (depth division) induces extreme curvature when combined with temporal root coupling.

H3. Redundancy between root motion and other latent degrees of freedom amplifies the problem.

---

## 5. Planned diagnostic test groups

### TG09 — Root fixed vs root RW (clean A/B)

**Purpose:** Revalidate the core empirical phenomenon with a trusted A/B comparison.

Variants:

* V0: Baseline with root RW.
* V1: Root fixed to DLT trajectory.

Constraints:

* All priors, likelihood scales, and non-root components identical.

Decision criterion:

* Divergence rate and step size.

---

### TG10 — Remove camera likelihood (direct 3D observation)

**Purpose:** Test whether projection geometry is required for the failure.

Variants:

* V0: Camera likelihood.
* V1: Direct 3D likelihood with known ground truth.

Interpretation:

* If V1 samples well while V0 fails, camera likelihood is implicated.

---

### TG10A — Simplified camera geometry (orthographic)

**Purpose:** Isolate the role of perspective depth division.

Variants:

* Orthographic projection with fixed scale.

Interpretation:

* Success here but failure under perspective indicates depth-related conditioning problems.

---

### TG11 — Redundancy stress test

**Purpose:** Assess whether redundancy amplifies curvature when root moves.

Variants:

* Fix or tightly constrain lengths and/or directions.

Interpretation:

* Improved sampling implicates redundancy rather than root dynamics alone.

---

### TG12 — Pixel-difference likelihood (diagnostic only)

**Purpose:** Test whether motion-dominant observation stabilizes sampling.

Variants:

* Likelihood on Δpixels, optionally with weak absolute anchoring.

Note:

* This is a diagnostic probe, not yet a commitment to a 6D/4D state.

---

## 6. Decision gates

After TG09–TG11:

* If TG10 and TG10A succeed while TG09 fails → camera geometry is primary.
* If TG12 improves stability → motion-based observation is promising.
* If none improve → deeper structural or redundancy issues exist.

Only after these gates do we consider architectural changes.

---

## 7. Relation to future architectural work

A velocity-augmented (6D) state with motion-aware observation remains a candidate solution.

It will be pursued only if diagnostics show that:

* camera geometry × temporal coupling is fundamentally ill-conditioned, and
* superficial conditioning fixes are insufficient.

A separate plan will be created if and when this becomes justified.

---

## 8. Next steps

1. Have Copilot review this plan for clarity, completeness, and consistency with existing divergence plans.
2. Incorporate feedback.
3. Implement test groups strictly in the order above.
